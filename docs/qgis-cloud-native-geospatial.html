<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Ujaval Gandhi" />


<title>Cloud Native Geospatial Workflows with QGIS (Full workshop Material)</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PDGF11RK4Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PDGF11RK4Z');
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Courses</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="http://spatialthoughts.com">Back to Main Site</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="#">Back to Top</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Cloud Native Geospatial Workflows with QGIS
(Full workshop Material)</h1>
<h3 class="subtitle">Using QGIS for visualizing and analyzing large
cloud-hosted datasets.</h3>
<h4 class="author">Ujaval Gandhi</h4>

</div>

<div id="TOC">
<ul>
<li><a href="#introduction" id="toc-introduction">Introduction</a></li>
<li><a href="#installation-and-setting-up-the-environment"
id="toc-installation-and-setting-up-the-environment">Installation and
Setting up the Environment</a>
<ul>
<li><a href="#install-qgis" id="toc-install-qgis">Install QGIS</a></li>
<li><a href="#get-the-data-package" id="toc-get-the-data-package">Get
the Data Package</a></li>
</ul></li>
<li><a href="#cloud-native-geospatial-formats"
id="toc-cloud-native-geospatial-formats">1. Cloud Native Geospatial
Formats</a>
<ul>
<li><a href="#load-a-cloud-optimized-geotiff-cog"
id="toc-load-a-cloud-optimized-geotiff-cog">1.1 Load a Cloud-Optimized
GeoTIFF (COG)</a></li>
<li><a href="#load-a-flatgeobuf-fgb-vector-layer"
id="toc-load-a-flatgeobuf-fgb-vector-layer">1.2 Load a FlatGeoBuf (FGB)
Vector Layer</a></li>
</ul></li>
<li><a href="#spatiotemporal-asset-catalogs-stac"
id="toc-spatiotemporal-asset-catalogs-stac">2. SpatioTemporal Asset
Catalogs (STAC)</a>
<ul>
<li><a href="#load-a-stac-asset" id="toc-load-a-stac-asset">2.1 Load a
STAC Asset</a></li>
<li><a href="#zonal-statistics-with-cloud-hosted-data"
id="toc-zonal-statistics-with-cloud-hosted-data">2.2 Zonal Statistics
with Cloud-hosted Data</a></li>
<li><a href="#explore-stac-catalogs" id="toc-explore-stac-catalogs">2.3
Explore STAC Catalogs</a></li>
</ul></li>
<li><a href="#stac-api-browser-plugin"
id="toc-stac-api-browser-plugin">3. STAC API Browser Plugin</a>
<ul>
<li><a href="#query-a-stac-api" id="toc-query-a-stac-api">3.1 Query a
STAC API</a></li>
<li><a href="#analyze-landcover-change"
id="toc-analyze-landcover-change">3.2 Analyze Landcover Change</a></li>
<li><a href="#create-a-sentinel-2-rgb-composite"
id="toc-create-a-sentinel-2-rgb-composite">3.3 Create a Sentinel-2 RGB
Composite</a></li>
</ul></li>
<li><a href="#creating-and-hosting-cloud-native-geospatial-data"
id="toc-creating-and-hosting-cloud-native-geospatial-data">4. Creating
and Hosting Cloud Native Geospatial Data</a>
<ul>
<li><a href="#creating-cloud-native-geospatial-data"
id="toc-creating-cloud-native-geospatial-data">4.1 Creating Cloud Native
Geospatial Data</a></li>
<li><a href="#hosting-cloud-native-geospatial-data"
id="toc-hosting-cloud-native-geospatial-data">4.2 Hosting Cloud Native
Geospatial Data</a></li>
</ul></li>
<li><a href="#data-credits" id="toc-data-credits">Data Credits</a></li>
<li><a href="#license" id="toc-license">License</a></li>
</ul>
</div>

<div style="page-break-after: always;"></div>
<hr />
<p><img src="images/spatial_thoughts_logo.png" width="250pt" style="display: block; margin: auto;" /></p>
<hr />
<div style="page-break-after: always;"></div>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This workshop will introduce participants to the modern approach to
working with large datasets in QGIS. Modern data formats - such as
Cloud-Optimized GeoTIFFs (COG), Cloud-Optimized Point Clouds (COPC), and
FlatGeoBuf (FGB) allow datasets to be streamed from cloud storage
without having to download entire files. Spatial Temporal Asset Catalog
(STAC) provides a standardized way to query cloud-hosted datasets.
Combined with QGIS, these technologies allow users to visualize and
analyze large datasets which was not possible before.</p>
<p><a
href="https://docs.google.com/presentation/d/1cpu1PcEX1pCpFvGZ9yyNH_YKfndmSoxV6qi2Bf7p_jk/edit?usp=sharing"
target="_blank"><img
src="images/qgis_cloud_native_geospatial/introduction.png" width="400"
alt="View Presentation" /></a></p>
<p><a
href="https://docs.google.com/presentation/d/1cpu1PcEX1pCpFvGZ9yyNH_YKfndmSoxV6qi2Bf7p_jk/edit?usp=sharing"
target="_blank">View the Presentation ↗</a></p>
</div>
<div id="installation-and-setting-up-the-environment"
class="section level1">
<h1>Installation and Setting up the Environment</h1>
<div id="install-qgis" class="section level2">
<h2>Install QGIS</h2>
<p>This workshop requires QGIS LTR version 3.34. Please review <a
href="install-qgis-ltr.html">QGIS-LTR Installation Guide</a> for
step-by-step instructions.</p>
</div>
<div id="get-the-data-package" class="section level2">
<h2>Get the Data Package</h2>
<p>We have created a data package containing checkpoint projects that
will allow you to load the results of each section. You can download the
data package from <code>qgis-cloud-native-geospatial.zip</code>.</p>
</div>
</div>
<div id="cloud-native-geospatial-formats" class="section level1">
<h1>1. Cloud Native Geospatial Formats</h1>
<div id="load-a-cloud-optimized-geotiff-cog" class="section level2">
<h2>1.1 Load a Cloud-Optimized GeoTIFF (COG)</h2>
<ol style="list-style-type: decimal">
<li>Open QGIS. We’ll first load a basemap. From the <em>Browser</em>
panel, scroll down and locate <strong>XYZ Tiles → OpenStreetMap</strong>
tile layer. Drag and drop it to the main canvas.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/cog1.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Once the <code>OpenStreetMap</code> layer is loaded, go to your
region of interest. Now we will load a 8GB cloud-optimized geotiff file
stored on Google Cloud Storage and stream the pixels over this region.
Click the <em>Open Data Source Manager</em> button.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/cog2.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Select the <em>Raster</em> tab. Select
<code>Protocol: HTTP(S), cloud etc.</code> as the <em>Source Type</em>.
Enter the following URL as the <em>URI</em>. Click <em>Add</em>.</li>
</ol>
<pre><code>https://storage.googleapis.com/spatialthoughts-public-data/ntl/viirs/viirs_ntl_2021_global.tif</code></pre>
<p><img src="images/qgis_cloud_native_geospatial/cog3.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>A new layer <code>viirs_ntl_2021_global</code> will be added to the
<em>Layers</em> panel. This is a global layer showing nighttime lights
intensity values recorded by the VIIRS instrument. Note that the file
loaded instantly and as you zoom in further, higher resolution pixels
are fetched dynamically from the file. While this file is located on a
remote location, you can use it just as if it was a regular GeoTIFF
file. Let’s visualize the layer using a color-ramp. Click the <em>Open
Layer Styling Panel</em> button on the <em>Layers</em> panel.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/cog4.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>In the <em>Layer Styling</em> panel, change the renderer to
<code>Singleband pseudocolor</code>. Select a color ramp of your choice.
The layer rendering will be updated.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/cog5.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="load-a-flatgeobuf-fgb-vector-layer" class="section level2">
<h2>1.2 Load a FlatGeoBuf (FGB) Vector Layer</h2>
<ol style="list-style-type: decimal">
<li>Next, we will learn how to load a cloud-hosted vector layer to QGIS.
We will stream a 800MB line layer hosted on GitHub file storage and
stream the features in the current canvas extent. Click the <em>Open
Data Source Manager</em> button.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/fgb1.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Select the <em>Vector</em> tab. Select
<code>Protocol: HTTP(S), cloud etc.</code> as the <em>Source Type</em>.
Enter the following URL as the <em>URI</em>. Click <em>Add</em>.</li>
</ol>
<pre><code>https://github.com/spatialthoughts/cloud-native-geospatial/releases/download/hydrorivers/hydrorivers.fgb</code></pre>
<p><img src="images/qgis_cloud_native_geospatial/fgb2.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>A new layer <code>hydrorivers -- rivers</code> will be added to the
<em>Layers</em> panel. This is a large line layer containing over 2.5
million features. QGIS will request and load only the features within
the current canvas extent. FlatGeoBuf format does not contain simplified
versions of features that can be loaded at lower zoom levels. So if you
zoom out to a large region, all the features within that region will be
requested. To prevent fetching unnecessarily large amounts of data - we
can enable scale dependent visibility. Right-click the
<code>hydrorivers -- rivers</code> layer and select
<em>Properties</em>.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/fgb3.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Select the <em>Rendering</em> tab and enable the <em>Scale Dependent
Visibility</em>. From the drop-down selector for <em>Minimum
(exclusive)</em> scale, select <code>1:1000000</code>. Click
<em>OK</em>.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/fgb4.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Now only when your canvas is zoomed in beyond the selected scale,
the features will be requested and rendered. Next, we will apply some
style to the vector layer. Click the <em>Open Layer Styling Panel</em>
button on the <em>Layers</em> panel. Change the <em>Color</em> to any
color of your choice. You can also adjust the <em>Width</em> of the
lines if required.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/fgb5.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>Zoom/Pan around the map and go to any region in the world. Data from
both the cloud-hosted files will be requested and rendered in the chosen
style.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/fgb6.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="spatiotemporal-asset-catalogs-stac" class="section level1">
<h1>2. SpatioTemporal Asset Catalogs (STAC)</h1>
<div id="load-a-stac-asset" class="section level2">
<h2>2.1 Load a STAC Asset</h2>
<ol style="list-style-type: decimal">
<li>Visit the <a href="https://stac.openlandmap.org/">OpenLandMap
STAC</a> catalog in a web browser. Locate the <strong>JRC Global Human
Settlement annual population (GHS)</strong> collection and click to view
more details.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/stac1.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>This collection consists of GHSL Gridded Population rasters from
year 2000-2021. Sort the collection in <em>Descending</em> order. The
first item will be the latest population raster. Click on it to explore
it further.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/stac2.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>This STAC Item consists of a Cloud-Optimized GeoTIFF image of
population for the year 2021. Click <strong>Copy URL</strong> button to
get the direct link to access the file.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/stac3.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Open QGIS. From the <em>Browser</em> panel, scroll down and locate
<strong>XYZ Tiles → OpenStreetMap</strong> tile layer. Drag and drop it
to the main canvas. Once the <code>OpenStreetMap</code> layer is loaded,
go to your region of interest. Click the <em>Open Data Source
Manager</em> button.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/stac4.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Select the <em>Raster</em> tab. Select
<code>Protocol: HTTP(S), cloud etc.</code> as the <em>Source Type</em>.
Enter the URL copied in the previous step as the <em>URI</em>. Click
<em>Add</em>.</li>
</ol>
<pre><code>https://s3.openlandmap.org/arco/pop.count_ghs.jrc_m_100m_s_20210101_20211231_go_epsg.4326_v20230620.tif</code></pre>
<p><img src="images/qgis_cloud_native_geospatial/stac5.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>A new layer
<code>pop.count_ghs.jrc_m_100m_s_20210101_20211231_go_epsg.4326_v20230620</code>
will be added to the <em>Layers</em> panel. This image represents the
population count in each 100m x 100m grid cell. The original data comes
with decimal values, but to optimize the storage space and transfer of
data, the image is saved with the data type <em>UInt32</em> (Integers).
To preserve the full fidelity of the data, the original pixel values are
multiplied by 100. Hence if the the pixel value is <code>2068</code> -
it represents a population count of <code>20.68</code>. Keep this in
mind and we will appropriately scale our results with this factor.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/stac6.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="zonal-statistics-with-cloud-hosted-data"
class="section level2">
<h2>2.2 Zonal Statistics with Cloud-hosted Data</h2>
<ol style="list-style-type: decimal">
<li>Let’s load some vector data. Click the <em>Open Data Source
Manager</em> button. Select the <em>Vector</em> tab. Select
<code>Protocol: HTTP(S), cloud etc.</code> as the <em>Source Type</em>.
Enter the following URL as the <em>URI</em>. Click <em>Add</em>.</li>
</ol>
<pre><code>https://storage.googleapis.com/spatialthoughts-public-data/geoboundaries/admin2.fgb</code></pre>
<p><img src="images/qgis_cloud_native_geospatial/zonal1.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>A new layer <code>admin2 -- adm2_polygons</code> will be added to
the <em>Layers</em> panel. This is a very large vector polygon layer and
the polygons for Admin2 regions within the current canvas extents will
be fetched and loaded. We will pick a region of interest. To make the
selection easier, let’s add some labels to the polygons. Click the
<em>Open Layer Styling Panel</em> button on the <em>Layers</em>
panel.Select the <em>Labels</em> tab. Select <code>Single Labels</code>
from the drop-down menu and select <code>adm2_name</code> as the
<em>Value</em>. The name of the administrative region will be rendered
on the map.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/zonal2.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Click on the <em>Select Features by Area or Single Click</em> button
on the <em>Selection Toolbar</em>. Once activated, click on your chosen
administrative region to select it. Go to <strong>Processing →
Toolbox</strong>. From the <em>Processing Toolbox</em>, search and
locate the <strong>Raster analysis → Zonal statistics</strong>
algorithm. Double-click to open it.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/zonal3.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>In the <em>Zonal Statistics</em> dialog, select
<code>admin2 -- adm2_polygons</code> as the <em>Input layer</em>. Make
sure to check the <em>Selected features only</em> box. Select the
<code>pop.count_ghs.jrc_m_100m_s_20210101_20211231_go_epsg.4326_v20230620</code>
layer as the <em>Raster layer</em>. Enter <code>population_</code> as
the <em>Output column prefix</em>. For the <em>Statistics to
calculate</em>, click the <em>…</em> button and select only
<code>Sum</code>. Save the output as a file
<code>zonal_stats.gpkg</code> and click <em>Run</em>.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/zonal4.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>The algorithm will fetch the pixels required to perform the
calculation and once complete, a new layer <code>zonal_stats</code> will
be added to the <em>Layers</em> panel. This layer contains the result of
the Zonal Statistics that was computed directed from the cloud-hosted
dataset by fetching only required pixels and features - saving us time,
bandwidth and storage.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/zonal5.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>The resulting value needs to be scaled by a factor of 100 to get the
actual population count. Search and locate the <strong>Vector table →
Field calculator</strong> algorithm and double-click to open it. Select
<code>zonal_stats</code> as the <em>Input layer</em> and enter
<code>population</code> as the <em>Field name</em>. Enter the following
expression to scale the population value. Enter the output file name as
<code>zonal_stats_final.gpkg</code> and click <em>Run</em>.</li>
</ol>
<pre><code>&quot;population_sum&quot; / 100</code></pre>
<p><img src="images/qgis_cloud_native_geospatial/zonal6.png" width="75%" style="display: block; margin: auto;" /></p>
<ol start="7" style="list-style-type: decimal">
<li>Once the computation finishes and the new layer
<code>zonal_stats_final</code> is loaded, right-click the layer and
select <em>Open Attribute Table</em>. The field
<strong>population</strong> contains the total population within the
selected administrative region.</li>
</ol>
<p><img src="images/qgis_cloud_native_geospatial/zonal7.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="explore-stac-catalogs" class="section level2">
<h2>2.3 Explore STAC Catalogs</h2>
<p>There are many publicly accessible STAC catalogs available - with
more providers making their data available through STAC. To explore all
the available catalogs, you can visit the <a
href="https://stacindex.org/">STAC Index</a>. Click on <em>Catalogs</em>
and explore the listings.</p>
<p><img src="images/qgis_cloud_native_geospatial/stacindex.png" width="75%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="stac-api-browser-plugin" class="section level1">
<h1>3. STAC API Browser Plugin</h1>
<div id="query-a-stac-api" class="section level2">
<h2>3.1 Query a STAC API</h2>
</div>
<div id="analyze-landcover-change" class="section level2">
<h2>3.2 Analyze Landcover Change</h2>
</div>
<div id="create-a-sentinel-2-rgb-composite" class="section level2">
<h2>3.3 Create a Sentinel-2 RGB Composite</h2>
</div>
</div>
<div id="creating-and-hosting-cloud-native-geospatial-data"
class="section level1">
<h1>4. Creating and Hosting Cloud Native Geospatial Data</h1>
<div id="creating-cloud-native-geospatial-data" class="section level2">
<h2>4.1 Creating Cloud Native Geospatial Data</h2>
<pre><code>gdal_translate -of COG viirs_ntl_2021_global.tif viirs_ntl_2021_global_cog.tif</code></pre>
<pre><code>ogr2ogr -f FlatGeobuf hydrorivers.fgb hydrorivers.gpkg</code></pre>
<pre><code>ogr2ogr -f FlatGeobuf admin2.fgb admin2.gpkg -select &quot;adm2_name,adm1_name,adm0_name,iso_2,iso_3&quot;</code></pre>
</div>
<div id="hosting-cloud-native-geospatial-data" class="section level2">
<h2>4.2 Hosting Cloud Native Geospatial Data</h2>
</div>
</div>
<div id="data-credits" class="section level1">
<h1>Data Credits</h1>
<ul>
<li>Global Edge-matched Subnational Boundaries: Humanitarian Edge
Matched, FieldMaps, OCHA, geoBoundaries, U.S. Department of State,
OpenStreetMap. Downloaded from <a href="https://fieldmaps.io/data"
class="uri">https://fieldmaps.io/data</a></li>
</ul>
</div>
<div id="license" class="section level1">
<h1>License</h1>
<p>This workshop material is licensed under a <a
href="https://creativecommons.org/licenses/by/4.0/">Creative Commons
Attribution 4.0 International (CC BY 4.0)</a>. You are free to re-use
and adapt the material but are required to give appropriate credit to
the original author as below:</p>
<p><em>Cloud Native Geospatial Workflows with QGIS</em> by Ujaval Gandhi
<a href="https://spatialthoughts.com">www.spatialthoughts.com</a></p>
<p>© 2024 Spatial Thoughts <a
href="https://spatialthoughts.com">www.spatialthoughts.com</a></p>
</div>

<!-- Comment Section Powered by utterances -->
<div id="comments">
  <hr />
  <p>If you want to report any issues with this page, please comment below.</p>
<script src="https://utteranc.es/client.js"
        repo="spatialthoughts/courses"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
